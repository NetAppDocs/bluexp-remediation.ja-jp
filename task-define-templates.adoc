---
sidebar: sidebar 
permalink: task-define-templates.html 
keywords: templates, resource templates, services templates, volume templates, cvo working environment template, find volumes 
summary: ネットアップが提供する「アクション」を 1 つ以上選択し、組織がリソース作成の最適化を開始するために使用できるアプリケーションテンプレートを迅速に構築します。 
---
= 組織のアプリケーションテンプレートを作成します
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ネットアップが提供する「アクション」を 1 つ以上選択し、組織がリソース作成の最適化を開始するために使用できるアプリケーションテンプレートを迅速に構築します。



== クイックスタート

これらの手順を実行すると、すぐに作業を開始できます。また、残りのセクションまでスクロールして詳細を確認することもできます。

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png["1つ"] 必要な前提条件を確認する
[role="quick-margin-list"]
* ユーザがテンプレートを使用して Cloud Volumes ONTAP 、オンプレミス ONTAP 、または Azure NetApp Files システム用のボリュームを作成する前に、ボリュームを導入する適切な作業環境にアクセスできることを確認してください。


[role="quick-margin-list"]
* クラウドサービス「 action 」をテンプレートに追加する場合（など） https://docs.netapp.com/us-en/cloud-manager-backup-restore/concept-backup-to-cloud.html["クラウドバックアップ"^] または https://docs.netapp.com/us-en/cloud-manager-data-sense/concept-cloud-compliance.html["クラウドデータの意味"^]をクリックして、ご使用の環境でサービスがアクティブでライセンスされていることを確認してください。


.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png["2 つ"] Application Templates サービスを起動します
[role="quick-margin-para"]
[*正常性]>[修正]を選択し、[*エディタ*]タブをクリックして、テンプレートで使用するアクションを選択します。

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-3.png["3つ"] 「アクション」を選択し、パラメーターを定義して、テンプレートを作成します
[role="quick-margin-para"]
作成手順に従い、テンプレートによって実行されるアクションを定義します。



== 要件

以下の要件を読み、サポートされている構成になっていることを確認してください。

* コネクタがない場合は、 https://docs.netapp.com/us-en/cloud-manager-setup-admin/concept-connectors.html["コネクターの作成方法を参照してください"^] AWS 、 Azure 、 GCP 向け。
* Cloud Volumes ONTAP ボリュームテンプレートを作成する際には、 Cloud Volumes ONTAP 作業環境がユーザに利用できることを確認してください。で Cloud Volumes ONTAP システムを起動する方法を参照してください https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-deploying-otc-aws.html["AWS"^]、 https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-deploying-otc-azure.html["Azure"^]または、のいずれかです https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-deploying-gcp.html["GCP"^]。
* オンプレミスの ONTAP ボリュームテンプレートを作成する場合は、オンプレミスの ONTAP 作業環境がユーザに利用できることを確認します。方法を参照してください https://docs.netapp.com/us-en/cloud-manager-ontap-onprem/task-discovering-ontap.html["オンプレミスの ONTAP システムを検出"^] BlueXPでは、
* Azure NetApp Files ボリュームテンプレートを作成する際には、 Azure NetApp Files の作業環境がユーザに割り当てられていることを確認します。方法を参照してください https://docs.netapp.com/us-en/cloud-manager-azure-netapp-files/task-quick-start.html["Azure NetApp Files 作業環境を作成します"^] BlueXPでは、
* クラウドバックアップを使用してテンプレート内のボリュームをバックアップする場合は、環境が Cloud Backup をアクティブ化していることを確認してください。
* クラウドデータセンスを使用してテンプレート内のボリュームをスキャンする場合は、クラウドデータセンスがアクティブ化されていることを確認してください。
* テンプレートでレプリケーションを有効にする場合、オンプレミスの ONTAP ボリューム用のテンプレートを使用するには、 ONTAP クラスタにアクティブな SnapMirror ライセンスが必要です。




== テンプレートを使用してリソースを作成する例

リソーステンプレートを使用して、新しいボリュームや新しい Cloud Volumes ONTAP 作業環境を作成できます。



=== Cloud Volumes ONTAP ボリュームのテンプレートを作成します

を参照してください https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-create-volumes.html["Cloud Volumes ONTAP ボリュームをプロビジョニングする方法"^] Cloud Volumes ONTAP ボリュームテンプレートで実行する必要があるすべてのパラメータの詳細については、を参照してください。

この例では、「データベース用の CVO ボリューム」という名前のテンプレートを作成し、次の 2 つのアクションを含めます。

* Cloud Volumes ONTAP ボリュームを作成します
+
AWS 環境のボリュームを 100GB のストレージで設定し、 Snapshot ポリシーを「 default 」に設定し、 Storage Efficiency を有効にします。

* Cloud Backup を有効にします
+
30 個の日単位バックアップ、 13 個の週単位バックアップ、 3 個の月単位バックアップを作成します（ _3 カ月保持ポリシーを使用）。



.手順
. [*正常性]>[修正]を選択し、[*テンプレート*]タブをクリックして、[*新しいテンプレートの追加*]をクリックします。
+
Select_a Template_page が表示されます。

+
image:screenshot_create_template_primary_action_cvo.png["このテンプレートを使用して実行する主なアクションの選択方法を示すスクリーンショット。"]

. 作成するリソースのタイプとして * Cloud Volumes ONTAP + Backup * のボリュームを選択し、 * Get Started * をクリックします。
+
Cloud Volumes ONTAP アクション定義ページでのボリュームの作成（ _Create Volume in Action Definition_page ）が表示されます。

+
image:screenshot_create_template_define_action_cvo.png["入力が必要な空の CVO テンプレートを示すスクリーンショット。"]

. * アクション名 * ：オプションで、デフォルト値の代わりにカスタマイズされたアクション名を入力します。
. * コンテキスト： * Cloud Volumes ONTAP 作業環境コンテキストを入力します（必要な場合）。
+
ユーザが既存の作業環境からテンプレートを起動すると、この情報は自動的に入力されます。

+
ユーザが（作業環境ではなく） Templates Dashboard からテンプレートを起動する際には、作業環境とボリュームを作成する SVM を選択する必要があります。そのため、これらのフィールドは「編集可能」としてマークされます。

. * 詳細： * ボリュームの名前とサイズを入力します。
+
[cols="25,75"]
|===
| フィールド | 説明 


| ボリューム名 | フィールド内をクリックし、 5 つのオプションのいずれかを選択します。任意の名前を入力するには、 * Free Text * を選択します。ボリューム名に特定のプレフィックスまたはサフィックスを付けるか、 _contains_certain 文字を指定するか、または入力した正規表現（ regex ）のルールに従うように指定することもできます。たとえば、「 db 」には必須のプレフィックス、サフィックス、またはに次の名前を指定できます。「 db_vol1 」、「 vol1_db 」、「 vol_db_1 」などのボリューム名を追加するようユーザに要求できます。 


| ボリュームサイズ | 許容値の範囲を指定することも、固定サイズを指定することもできます。この値は GB 単位です。この例では、固定値 *100* を追加できます。 


| タグ | このボリュームに関連付けるタグの名前と値のペアを入力します。たとえば、タグ名に「コストセンター」を追加し、コストセンターコード「 655829 」を値として追加できます。タグ名と値のペアをさらに追加することで、ボリュームに複数のタグを関連付けることができます。 
|===
. * 保護： * 「 default 」またはその他のポリシーを選択して Snapshot コピーを作成するか、 Snapshot コピーを作成しない場合は「 None 」を選択します。
. * 使用プロファイル： * ネットアップの Storage Efficiency 機能をボリュームに適用するかどうかを選択します。これには、シンプロビジョニング、重複排除、圧縮が含まれます。この例では、 Storage Efficiency を有効にしておきます。
. * ディスクタイプ：クラウドストレージプロバイダとディスクタイプを選択ディスクの選択によっては、最小および最大の IOPS またはスループット（ MB/ 秒）値を選択することもできます。基本的には、特定の Quality of Service （ QoS ；サービス品質）を定義します。
. * プロトコルオプション： * NFS * または * SMB * を選択して、ボリュームのプロトコルを設定します。次に、プロトコルの詳細を指定します。
+
[cols="25,75"]
|===
| NFS フィールド | 説明 


| Access Control の略 | ボリュームへのアクセスにアクセス制御が必要かどうかを選択します。 


| エクスポートポリシー | ボリュームにアクセスできるサブネット内のクライアントを定義するエクスポートポリシーを作成します。 


| NFS バージョン | ボリュームの NFS バージョンを選択します。 _nfsv3_or_nfsv4_ 、またはその両方を選択できます。 
|===
+
[cols="25,75"]
|===
| SMB フィールド | 説明 


| 共有名 | フィールド内をクリックし、 5 つのオプションのいずれかを選択します。任意の名前（フリーテキスト）を入力するか、共有名に特定のプレフィックスまたはサフィックスを付加する、 _contains_certain 文字を使用する、または入力した正規表現（ regex ）のルールに従うように指定できます。 


| 権限 | ユーザとグループ（アクセス制御リストまたは ACL とも呼ばれる）の共有へのアクセスのレベルを選択します。 


| ユーザ / グループ | ローカルまたはドメインの Windows ユーザまたはグループ、あるいは UNIX ユーザまたはグループを指定します。ドメインの Windows ユーザ名を指定する場合は、 domain\username 形式でユーザのドメインを指定する必要があります。 
|===
. * 階層化： * ボリュームに適用する階層化ポリシーを選択します。このボリュームからオブジェクトストレージにコールドデータを階層化しない場合は、「なし」に設定します。
+
を参照してください https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/concept-data-tiering.html#volume-tiering-policies["ボリューム階層化ポリシー"^] 概要については、およびを参照してください https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-tiering.html["使用頻度の低いデータをオブジェクトストレージに階層化します"^] をクリックして、環境が階層化用に設定されていることを確認してください。

. このアクションに必要なパラメーターを定義したら、 * 適用 * をクリックする。
+
テンプレートの値が正しく入力されている場合は、 [ ボリュームを Cloud Volumes ONTAP に作成 ] ボックスに緑のチェックマークが追加されます。

. Enable Cloud Backup on Volume * ボックスをクリックします。 Cloud Backup on Volume Action Definition_Dialog が表示され、 Cloud Backup の詳細を入力できます。
+
image:screenshot_create_template_add_action.png["作成したボリュームに追加できるその他の操作を示すスクリーンショット。"]

. 3 カ月保持 * バックアップ・ポリシーを選択し、 30 個の日単位、 13 個の週単位、 3 個の月単位バックアップを作成します。
. [Working Environment] フィールドと [Volume Name] フィールドの下には、バックアップを有効にするボリュームを指定するために使用する 3 つの選択肢があります。を参照してください link:reference-template-building-blocks.html#pass-values-between-template-actions["これらのフィールドの入力方法"]。
. [ 適用 ] をクリックすると、 [ クラウドバックアップ ] ダイアログが保存されます。
. 左上に、データベース * （この例では）のテンプレート名 * CVO ボリュームを入力してください。
. [* 設定とドリフト * ] をクリックして、このテンプレートを他の同様のテンプレートと区別できるように、より詳細な概要を提供します。したがって、テンプレート全体のドリフトを有効にしてから、 [ * 適用 * ] をクリックします。
+
ドリフトを使用すると、BlueXPでは、このテンプレートの作成時に入力したハードコードされた値を監視できます。

. [ テンプレートの保存 *] をクリックします。


.結果
テンプレートが作成され、新しいテンプレートが表示されるテンプレートダッシュボードに戻ります。

を参照してください <<テンプレートの作成後の作業,テンプレートについてユーザに説明する必要がある内容>>。



=== Azure NetApp Files ボリュームのテンプレートを作成します

Azure NetApp Files ボリュームのテンプレートは、 Cloud Volumes ONTAP ボリュームのテンプレートを作成する場合と同じ方法で作成します。

を参照してください https://docs.netapp.com/us-en/cloud-manager-azure-netapp-files/task-manage-anf-volumes.html#creating-volumes["Azure NetApp Files ボリュームをプロビジョニングする方法"^] ANF ボリュームテンプレートで実行する必要があるすべてのパラメータの詳細については、を参照してください。

.手順
. [*正常性]>[修正]を選択し、[*テンプレート*]タブをクリックして、[*新しいテンプレートの追加*]をクリックします。
+
Select_a Template_page が表示されます。

+
image:screenshot_create_template_primary_action_blank.png["このテンプレートを使用して実行する主なアクションの選択方法を示すスクリーンショット。"]

. [ 空白のテンプレート ] を選択し、 [ 開始 ] をクリックします。
. 作成するリソースのタイプとして * Azure NetApp Files でボリュームを作成 * を選択し、 * 適用 * をクリックします。
+
Azure NetApp Files アクション定義ページでのボリュームの作成（ _Create Volume in Action Definition_page ）が表示されます。

+
image:screenshot_create_template_define_action_anf.png["入力する必要がある空の ANF テンプレートを示すスクリーンショット。"]

. * アクション名 * ：オプションで、デフォルト値の代わりにカスタマイズされたアクション名を入力します。
. * ボリュームの詳細： * ボリュームの名前とサイズを入力します。必要に応じて、ボリュームのタグを指定することもできます。
+
[cols="25,75"]
|===
| フィールド | 説明 


| ボリューム名 | フィールド内をクリックし、 5 つのオプションのいずれかを選択します。任意の名前を入力するには、 * Free Text * を選択します。ボリューム名に特定のプレフィックスまたはサフィックスを付けるか、 _contains_certain 文字を指定するか、または入力した正規表現（ regex ）のルールに従うように指定することもできます。たとえば、「 db 」には必須のプレフィックス、サフィックス、またはに次の名前を指定できます。「 db_vol1 」、「 vol1_db 」、「 vol_db_1 」などのボリューム名を追加するようユーザに要求できます。 


| ボリュームサイズ | 許容値の範囲を指定することも、固定サイズを指定することもできます。この値は GB 単位です。 


| タグ | このボリュームに関連付けるタグの名前と値のペアを入力します。たとえば、タグ名に「コストセンター」を追加し、コストセンターコード「 655829 」を値として追加できます。タグ名と値のペアをさらに追加することで、ボリュームに複数のタグを関連付けることができます。 
|===
. * プロトコル：ボリュームのプロトコルを設定するには、 * nfsv3 * 、 * NFSv4.1 * 、または * smb * を選択します。次に、プロトコルの詳細を指定します。
+
[cols="25,75"]
|===
| NFS フィールド | 説明 


| ボリュームパス | 5 つのオプションのいずれかを選択します。管理者が任意のパスを入力できるようにするには、 * フリーテキスト * を選択するか、パス名に特定の接頭辞または接尾辞を付けるか、 _contains_certain 文字を使用するか、または入力した正規表現（ regex ）の規則に従うように指定します。 


| エクスポートポリシールール | ボリュームにアクセスできるサブネット内のクライアントを定義するエクスポートポリシーを作成します。 
|===
+
[cols="25,75"]
|===
| SMB フィールド | 説明 


| ボリュームパス | 5 つのオプションのいずれかを選択します。管理者が任意のパスを入力できるようにするには、 * フリーテキスト * を選択するか、パス名に特定の接頭辞または接尾辞を付けるか、 _contains_certain 文字を使用するか、または入力した正規表現（ regex ）の規則に従うように指定します。 
|===
. * コンテキスト： * Azure NetApp Files 作業環境、新規または既存の Azure NetApp Files アカウントの詳細、およびその他の詳細を入力します。
+
[cols="25,75"]
|===
| フィールド | 説明 


| 作業環境 | ストレージ管理者ユーザが既存の作業環境からテンプレートを起動すると、この情報は自動的に入力されます。ユーザが（作業環境ではなく） Templates Dashboard からテンプレートを起動する場合、ボリュームを作成する作業環境を選択する必要があります。 


| ネットアップアカウント名 | アカウントに使用する名前を入力します。 


| Azure サブスクリプション ID | Azure サブスクリプション ID を入力します。これは、「 2b04f26-7de6-42eb-9234-e2903d7s327 」のような形式のフル ID です。 


| 地域 | を使用してリージョンを入力します https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.documents.locationnames?view=azure-dotnet#fields["内部リージョン名"^]。 


| リソースグループ名 | 使用するリソースグループの名前を入力します。 


| Capacity Pool Name の略 | 既存の容量プールの名前を入力します。 


| サブネット | VNet とサブネットを入力します。この値には、完全パスが含まれます。形式は「 /subscription/<subscription_id>/resourceGroups/<resource_group>/provider/Microsoft.Network/virtualNetworks/<vpc_name>/subnets/<subhet_name>" です。 
|===
. * Snapshot コピー： * 既存のボリュームの特性を使用して新しいボリュームを作成する場合は、既存のボリューム Snapshot の Snapshot ID を入力します。
. このアクションに必要なパラメーターを定義したら、 * 適用 * をクリックする。
. テンプレートに使用する名前を左上に入力します。
. [* 設定とドリフト * ] をクリックして、このテンプレートを他の同様のテンプレートと区別できるように、より詳細な概要を提供します。したがって、テンプレート全体のドリフトを有効にしてから、 [ * 適用 * ] をクリックします。
+
ドリフトを使用すると、BlueXPでは、このテンプレートの作成時に入力したハードコードされた値を監視できます。

. [ テンプレートの保存 *] をクリックします。


.結果
テンプレートが作成され、新しいテンプレートが表示されるテンプレートダッシュボードに戻ります。

を参照してください <<テンプレートの作成後の作業,テンプレートについてユーザに説明する必要がある内容>>。



=== オンプレミスの ONTAP ボリューム用のテンプレートを作成します

を参照してください https://docs.netapp.com/us-en/cloud-manager-ontap-onprem/task-provisioning-ontap.html#creating-volumes-for-ontap-clusters["オンプレミスの ONTAP ボリュームをプロビジョニングする方法"^] オンプレミスの ONTAP ボリュームテンプレートで実行する必要があるすべてのパラメータの詳細については、を参照してください。

.手順
. [*正常性]>[修正]を選択し、[*テンプレート*]タブをクリックして、[*新しいテンプレートの追加*]をクリックします。
+
Select_a Template_page が表示されます。

+
image:screenshot_create_template_primary_action_blank.png["このテンプレートを使用して実行する主なアクションの選択方法を示すスクリーンショット。"]

. [ 空白のテンプレート ] を選択し、 [ 開始 ] をクリックします。
+
[ 新規アクションの追加（ _Add New Action_） ] ページが表示されます。

+
image:screenshot_create_template_primary_action_onprem.png["新しいアクションの追加ページで主なアクションを選択する方法を示すスクリーンショット。"]

. 作成するリソースのタイプとして * Create Volume in On-Premises ONTAP * を選択し、 * Apply * をクリックします。
+
オンプレミスの ONTAP アクション定義ページでのボリュームの作成（ _Create Volume in On-Premises Action Definition_page ）が表示されます。

+
image:screenshot_create_template_define_action_onprem.png["入力する必要がある空のオンプレミス ONTAP テンプレートを示すスクリーンショット。"]

. * アクション名 * ：オプションで、デフォルト値の代わりにカスタマイズされたアクション名を入力します。
. * コンテキスト： * 必要に応じて、オンプレミスの ONTAP 作業環境を入力します。
+
ユーザが既存の作業環境からテンプレートを起動すると、この情報は自動的に入力されます。

+
ユーザが（作業環境ではなく） Templates Dashboard からテンプレートを起動する際には、作業環境、 SVM 、およびボリュームを作成するアグリゲートを選択する必要があります。

. * 詳細： * ボリュームの名前とサイズを入力します。
+
[cols="25,75"]
|===
| フィールド | 説明 


| ボリューム名 | フィールド内をクリックし、 5 つのオプションのいずれかを選択します。任意の名前を入力するには、 * Free Text * を選択します。ボリューム名に特定のプレフィックスまたはサフィックスを付けるか、 _contains_certain 文字を指定するか、または入力した正規表現（ regex ）のルールに従うように指定することもできます。たとえば、「 db 」には必須のプレフィックス、サフィックス、またはに次の名前を指定できます。「 db_vol1 」、「 vol1_db 」、「 vol_db_1 」などのボリューム名を追加するようユーザに要求できます。 


| ボリュームサイズ | 許容値の範囲を指定することも、固定サイズを指定することもできます。この値は GB 単位です。この例では、固定値 *100* を追加できます。 


| タグ | このボリュームに関連付けるタグの名前と値のペアを入力します。たとえば、タグ名に「コストセンター」を追加し、コストセンターコード「 655829 」を値として追加できます。タグ名と値のペアをさらに追加することで、ボリュームに複数のタグを関連付けることができます。 
|===
. * 保護： * 「 default 」またはその他のポリシーを選択して Snapshot コピーを作成するか、 Snapshot コピーを作成しない場合は「 None 」を選択します。
. * 使用プロファイル： * ネットアップの Storage Efficiency 機能をボリュームに適用するかどうかを選択します。これには、シンプロビジョニング、重複排除、圧縮が含まれます。
. * プロトコルオプション： * NFS * または * SMB * を選択して、ボリュームのプロトコルを設定します。次に、プロトコルの詳細を指定します。
+
[cols="25,75"]
|===
| NFS フィールド | 説明 


| Access Control の略 | ボリュームへのアクセスにアクセス制御が必要かどうかを選択します。 


| エクスポートポリシー | ボリュームにアクセスできるサブネット内のクライアントを定義するエクスポートポリシーを作成します。 


| NFS バージョン | ボリュームの NFS バージョンを選択します。 _nfsv3_or_nfsv4_ 、またはその両方を選択できます。 
|===
+
[cols="25,75"]
|===
| SMB フィールド | 説明 


| 共有名 | フィールド内をクリックし、 5 つのオプションのいずれかを選択します。任意の名前（フリーテキスト）を入力するか、共有名に特定のプレフィックスまたはサフィックスを付加する、 _contains_certain 文字を使用する、または入力した正規表現（ regex ）のルールに従うように指定できます。 


| 権限 | ユーザとグループ（アクセス制御リストまたは ACL とも呼ばれる）の共有へのアクセスのレベルを選択します。 


| ユーザ / グループ | ローカルまたはドメインの Windows ユーザまたはグループ、あるいは UNIX ユーザまたはグループを指定します。ドメインの Windows ユーザ名を指定する場合は、 domain\username 形式でユーザのドメインを指定する必要があります。 
|===
. このアクションに必要なパラメーターを定義したら、 * 適用 * をクリックする。
+
テンプレートの値が正しく入力されている場合は、「オンプレミスの ONTAP にボリュームを作成」ボックスに緑のチェックマークが追加されます。

. 左上にテンプレート名を入力します。
. [* 設定とドリフト * ] をクリックして、このテンプレートを他の同様のテンプレートと区別できるように、より詳細な概要を提供します。したがって、テンプレート全体のドリフトを有効にしてから、 [ * 適用 * ] をクリックします。
+
ドリフトを使用すると、BlueXPでは、このテンプレートの作成時に入力したハードコードされた値を監視できます。

. [ テンプレートの保存 *] をクリックします。


.結果
テンプレートが作成され、新しいテンプレートが表示されるテンプレートダッシュボードに戻ります。

を参照してください <<テンプレートの作成後の作業,テンプレートについてユーザに説明する必要がある内容>>。



=== Cloud Volumes ONTAP 作業環境のテンプレートを作成します

テンプレートを使用して、シングルノードまたは高可用性 Cloud Volumes ONTAP 作業環境を作成できます。

[NOTE]
====
* このサポートは、現時点では AWS 環境に対してのみ提供されています。
* このテンプレートは、作業環境で最初のボリュームを作成するものではありません。ボリュームを作成するには、テンプレートに「 Create Volume in Cloud Volumes ONTAP 」アクションを追加する必要があります。


====
を参照してください https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-deploying-otc-aws.html#launching-a-single-node-cloud-volumes-ontap-system-in-aws["AWS でシングルノードの Cloud Volumes ONTAP システムを起動する方法"^] または https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-deploying-otc-aws.html#launching-a-cloud-volumes-ontap-ha-pair-in-aws["AWS での Cloud Volumes ONTAP HA ペア"^] 必要な前提条件については、このテンプレートで定義する必要があるすべてのパラメータの詳細については、を参照してください。

.手順
. [*正常性]>[修正]を選択し、[*テンプレート*]タブをクリックして、[*新しいテンプレートの追加*]をクリックします。
+
Select_a Template_page が表示されます。

+
image:screenshot_create_template_primary_action_blank.png["このテンプレートを使用して実行する主なアクションの選択方法を示すスクリーンショット。"]

. [ 空白のテンプレート ] を選択し、 [ 開始 ] をクリックします。
+
[ 新規アクションの追加（ _Add New Action_） ] ページが表示されます。

+
image:screenshot_create_template_cvo_env_aws.png["新しいアクションの追加ページで主なアクションを選択する方法を示すスクリーンショット。"]

. 作成するリソースのタイプとして、 * Create Working Environment in AWS （シングルノード） * または * Create Working Environment in AWS （ハイアベイラビリティ） * を選択し、 * Apply * をクリックします。
+
この例では、「 _Create Working Environment in AWS （ single node ） _page 」が表示されます。

+
image:screenshot_create_template_cvo_env_aws1.png["入力が必要な空の Cloud Volumes ONTAP 作業環境テンプレートを示すスクリーンショット。"]

. * アクション名 * ：オプションで、デフォルト値の代わりにカスタマイズされたアクション名を入力します。
. * 詳細とクレデンシャル * ：使用する AWS クレデンシャルを選択し、作業環境名を入力して、必要に応じてタグを追加します。
+
このページの一部のフィールドは、説明のために用意されています。次の表では、ガイダンスが必要なフィールドについて説明します。

+
[cols="25,75"]
|===
| フィールド | 説明 


| クレデンシャル | これらは、 Cloud Volumes ONTAP クラスタ管理アカウントのクレデンシャルです。これらのクレデンシャルを使用して、 ONTAP System Manager またはその CLI を使用して Cloud Volumes ONTAP に接続できます。 


| 作業環境名 | BlueXPでは、作業環境名を使用してCloud Volumes ONTAP システムとAmazon EC2インスタンスの両方に名前を付けます。また、このオプションを選択した場合は、事前定義されたセキュリティグループのプレフィックスとして名前が使用されます。フィールド内をクリックし、 5 つのオプションのいずれかを選択します。管理者が任意の名前を入力できるようにするには、 * フリーテキスト * を選択するか、作業環境名に特定の接頭辞または接尾辞を付けるか、 _contains_certain 文字を使用するか、または入力した正規表現（ regex ）の規則に従うように指定します。 


| タグ | AWS タグは、 AWS リソースのメタデータです。BlueXPは、Cloud Volumes ONTAP インスタンスとそのインスタンスに関連付けられている各AWSリソースにタグを追加します。タグの詳細については、を参照してください https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html["AWS ドキュメント：「 Tagging your Amazon EC2 Resources"^]。 
|===
. * 場所と接続 * ：に記録したネットワーク情報を入力します https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-planning-your-config.html#aws-network-information-worksheet["AWS ワークシート"^]。これには、 AWS リージョン、 VPC 、サブネット、セキュリティグループが含まれます。
+
AWS Outpost を使用している場合は、 Outpost VPC を選択して、その Outpost に単一のノードの Cloud Volumes ONTAP システムを導入できます。エクスペリエンスは、 AWS に存在する他の VPC と同じです。

. * 認証方法 * ：使用する SSH 認証方法として、パスワードまたはキーペアを選択します。
. * データ暗号化 * ：データ暗号化なし、または AWS で管理する暗号化を選択します。
+
AWS で管理する暗号化の場合は、アカウントまたは別の AWS アカウントから別の Customer Master Key （ CMK ；カスタマーマスターキー）を選択できます。

+
https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/task-setting-up-kms.html["Cloud 用の AWS KMS の設定方法については、こちらをご覧ください Volume ONTAP の略"^]。

. * 充電方法 * ：このシステムで使用する充電オプションを指定します。
+
https://docs.netapp.com/us-en/cloud-manager-cloud-volumes-ontap/concept-licensing.html["これらの充電方法について説明します"^]。

. * ネットアップサポートサイトのアカウント * ：ネットアップサポートサイトのアカウントを選択します。
. * 構成済みパッケージ *: 作業環境で作成されたボリュームのいくつかの要因を決定する 4 つの構成済みパッケージのいずれかを選択します
. * SMB 構成 * ：この作業環境で SMB を使用してボリュームを導入する場合は、 CIFS サーバと関連する構成要素をセットアップできます。
. このアクションに必要なパラメーターを定義したら、 * 適用 * をクリックする。
+
テンプレートの値が正しく入力されている場合は、「 Create Working Environment in AWS （単一ノード）」ボックスに緑のチェックマークが追加されます。

. このテンプレートに別の操作を追加して、この作業環境用のボリュームを作成することもできます。その場合は、をクリックします image:button_plus_sign_round.png["プラスボタン"] そのアクションを追加します。方法を参照してください <<Cloud Volumes ONTAP ボリュームのテンプレートを作成します,Cloud Volumes ONTAP ボリュームのテンプレートを作成します>> を参照してください。
. 左上にテンプレート名を入力します。
. [* 設定とドリフト * ] をクリックして、このテンプレートを他の同様のテンプレートと区別できるように、より詳細な概要を提供します。したがって、テンプレート全体のドリフトを有効にしてから、 [ * 適用 * ] をクリックします。
+
ドリフトを使用すると、BlueXPでは、このテンプレートの作成時に入力したハードコードされた値を監視できます。

. [ テンプレートの保存 *] をクリックします。


.結果
テンプレートが作成され、新しいテンプレートが表示されるテンプレートダッシュボードに戻ります。

を参照してください <<テンプレートの作成後の作業,テンプレートについてユーザに説明する必要がある内容>>。



== テンプレートを使用して既存のリソースを検索する例

既存のリソースを検索 _action を使用すると、特定の作業環境を検索したり、さまざまなフィルタを使用して既存のボリュームを検索したりできるため、検索対象を目的のリソースだけに絞り込むことができます。正しいリソースが見つかったら、作業環境にボリュームを追加するか、作成されたボリュームでクラウドサービスを有効にすることができます。


NOTE: この時点で、 Cloud Volumes ONTAP 、オンプレミス ONTAP 、 Azure NetApp Files システム内にボリュームを見つけることができます。また、 Cloud Volumes ONTAP とオンプレミスの ONTAP でクラウドバックアップを有効にすることもできます。追加のリソースとサービスは、後で利用可能になります。



=== 既存のボリュームを検索し、クラウドサービスをアクティブ化

現在の _ 既存のリソースを検索 _ アクション機能を使用すると、現在クラウドバックアップまたはクラウドデータセンスが有効になっていない Cloud Volumes ONTAP およびオンプレミス ONTAP 作業環境上のボリュームを検索できます。特定のボリュームで Cloud Backup を有効にすると、その作業環境のデフォルトポリシーとして設定したバックアップポリシーも設定されるため、作業環境の以降のすべてのボリュームで同じバックアップポリシーを使用できます。

.手順
. [*正常性]>[修正]を選択し、[*テンプレート*]タブをクリックして、[*新しいテンプレートの追加*]をクリックします。
+
Select_a Template_page が表示されます。

+
image:screenshot_create_template_primary_action_blank.png["このテンプレートを使用して実行する主なアクションの選択方法を示すスクリーンショット。"]

. [ 空白のテンプレート ] を選択し、 [ 開始 ] をクリックします。
+
[ 新規アクションの追加（ _Add New Action_） ] ページが表示されます。

+
image:screenshot_create_template_find_resource_action.png["新しいアクションの追加ページから既存リソースを検索アクションを選択する方法を示すスクリーンショット。"]

. 定義するアクションのタイプとして * 既存のリソースを検索 * を選択し、 * 適用 * をクリックします。
+
既存リソースを検索アクション定義ページが表示されます

+
image:screenshot_define_find_resource_action1.png["入力が必要な既存リソースの検索テンプレートが空白であることを示すスクリーンショット。"]

. * アクション名 * ：デフォルト値の代わりに、カスタマイズされたアクション名を入力します。たとえば、「 Cluster ABC で大容量ボリュームを検索してバックアップを有効にする」などです。
. * リソースタイプ： * 検索するリソースのタイプを選択します。この場合は、「 * Volumes in Cloud Volumes ONTAP * 」を選択します。
+
このアクションに必要なエントリは、これだけです。「 * Continue * 」をクリックすると、環境内のすべての Cloud Volumes ONTAP システム上のすべてのボリュームのリストが表示されます。

+
代わりに、 Cloud Backup アクションを適用する結果（この場合はボリューム）の数を減らすために、いくつかのフィルタを入力することを推奨します。

. _Context_area では、特定の作業環境とその作業環境に関するその他の詳細を選択できます。
+
image:screenshot_define_find_resource_filter_context.png["既存リソースの検索テンプレートに適用できるコンテキストフィルタを示すスクリーンショット。"]

. 詳細領域では、ボリューム名、ボリュームサイズの範囲、およびボリュームに割り当てられているタグを選択できます。
+
ボリューム名として、フィールド内をクリックし、 5 つのオプションのいずれかを選択します。任意の名前を入力するには、 * Free Text * を選択します。ボリューム名に特定のプレフィックスまたはサフィックスを付けるか、 _contains_certain 文字を指定するか、または入力した正規表現（ regex ）のルールに従うように指定することもできます。

+
ボリュームサイズの範囲を指定できます。たとえば、 100GiB ~ 500GiB のすべてのボリュームを指定できます。

+
タグの場合、特定のタグキー / 値ペアを含むボリュームのみが結果に表示されるように、検索をさらに絞り込むことができます。

+
image:screenshot_define_find_resource_filter_details.png["既存のリソースの検索テンプレートに適用できる詳細フィルタを示すスクリーンショット。"]

. [* Continue （続行） ] をクリックすると、ページが更新され、テンプレートで定義した検索条件が表示されます。
+
image:screenshot_define_find_resource_search_criteria.png["既存のリソースの検索テンプレートに対して定義した検索条件を示すスクリーンショット。"]

. [ 検索条件を今すぐテストする ] をクリックして、現在の結果を表示します。
+
** 結果が想定どおりでない場合は、をクリックします image:screenshot_edit_icon.gif["鉛筆アイコンを編集します"] をクリックし、さらに検索条件を絞り込んでください。
** 結果が正常に表示されたら、「 * 完了 * 」をクリックします。
+
完成した既存のリソースを検索アクションがエディタウィンドウに表示されます



. プラス記号をクリックして別のアクションを追加し、 * ボリュームでクラウドバックアップを有効にする * を選択して、 * 適用 * をクリックします。
+
[Enable Cloud Backup on Volume_action_] がウィンドウに追加されます。

+
image:screenshot_template_add_backup_action.png["テンプレートにクラウドバックアップアクションを追加する手順を示すスクリーンショット。"]

. で説明したように、バックアップ条件を定義できます <<ボリュームにバックアップ機能を追加します,ボリュームにバックアップ機能を追加する>> これにより、テンプレートは、既存のリソースを検索アクションで選択したボリュームに正しいバックアップポリシーを適用します。
. [ 適用 ] をクリックして、 [ バックアップ ] アクションに加えたカスタマイズを保存し、完了したら [ テンプレートの保存 ] をクリックします。


.結果
テンプレートが作成され、新しいテンプレートが表示されるテンプレートダッシュボードに戻ります。

を参照してください <<テンプレートの作成後の作業,テンプレートについてユーザに説明する必要がある内容>>。



=== 既存の作業環境を検索

既存のリソースを検索アクションを使用すると ' 作業環境を検索し ' ボリュームの作成などの他のテンプレートアクションを使用して ' 既存の作業環境に対して簡単にアクションを実行できます

.手順
. [*正常性]>[修正]を選択し、[*テンプレート*]タブをクリックして、[*新しいテンプレートの追加*]をクリックします。
+
Select_a Template_page が表示されます。

+
image:screenshot_create_template_primary_action_blank.png["このテンプレートを使用して実行する主なアクションの選択方法を示すスクリーンショット。"]

. [ 空白のテンプレート ] を選択し、 [ 開始 ] をクリックします。
+
[ 新規アクションの追加（ _Add New Action_） ] ページが表示されます。

+
image:screenshot_create_template_find_resource_action.png["新しいアクションの追加ページから既存リソースを検索アクションを選択する方法を示すスクリーンショット。"]

. 定義するアクションのタイプとして * 既存のリソースを検索 * を選択し、 * 適用 * をクリックします。
+
既存リソースを検索アクション定義ページが表示されます

+
image:screenshot_define_find_work_env.png["入力が必要な既存リソースの検索テンプレートが空白であることを示すスクリーンショット。"]

. * アクション名 * ：デフォルト値の代わりに、カスタマイズされたアクション名を入力します。たとえば、「ダラスを含む作業環境を検索」とします。
. * リソースタイプ： * 検索するリソースのタイプを選択します。この場合は、 * 作業環境 * を選択します。
+
このアクションに必要なエントリは、これだけです。[* Continue * Now] をクリックすると、環境内のすべての作業環境のリストが表示されます。

+
代わりに、いくつかのフィルタを入力して結果の数を減らすことを推奨します（この場合は作業環境）。

. _Details_area でいくつかのフィルタを定義したら ' 特定の作業環境を選択できます
. [* Continue * （続行） ] をクリックして設定を保存し、 [* Done * （完了 * ） ] をクリックします。
. 左上にテンプレート名を入力し、 [ テンプレートの保存 ] をクリックします


.結果
テンプレートが作成され、新しいテンプレートが表示されるテンプレートダッシュボードに戻ります。

を参照してください <<テンプレートの作成後の作業,テンプレートについてユーザに説明する必要がある内容>>。



== テンプレートを使用してサービスを有効にする例

サービステンプレートを使用すると、新しく作成したボリュームで Cloud Backup 、 Cloud Data Sense 、 Replication （ SnapMirror ）の各サービスをアクティブ化できます。



=== ボリュームにバックアップ機能を追加します

ボリュームテンプレートを作成する場合、を使用して定期的にボリュームのバックアップを作成するテンプレートにを追加できます https://docs.netapp.com/us-en/cloud-manager-backup-restore/concept-backup-to-cloud.html["クラウドバックアップ"^] サービス


TIP: この操作は Azure NetApp Files ボリュームには適用されません。

image:screenshot_template_backup.png["ボリュームのバックアップ機能を有効にするページのスクリーンショット。"]

. * Policy * ：使用するバックアップポリシーを選択します。
. * コンテキスト * ：デフォルトでは、作業環境、 Storage VM 、およびボリュームには変数が設定され、同じテンプレートで以前に作成したボリュームのバックアップを作成することを示します。これが必要な場合は、すべて設定されています。
+
別のボリュームのバックアップを作成する場合は、それらの詳細を手動で入力できます。方法を参照してください link:reference-template-building-blocks.html#pass-values-between-template-actions["[ コンテキスト（ Context ） ] フィールドに入力する"] をクリックして、別のボリュームを指定します。

. [ 適用 ] をクリックして変更を保存します。




=== データセンス機能をボリュームに追加します

ボリュームテンプレートを作成するときに、を使用してボリュームのコンプライアンスと分類をスキャンするテンプレートにを追加できます https://docs.netapp.com/us-en/cloud-manager-data-sense/concept-cloud-compliance.html["クラウドデータの意味"^] サービス

image:screenshot_template_data_sense.png["ボリュームのスキャン機能を有効にするページのスクリーンショット。"]

. * コンテキスト * ：デフォルトでは、作業環境、ボリューム名、ボリューム UUID 、ボリュームパス、およびプロトコルの変数が入力されます。これは、この同じテンプレートで以前に作成したボリュームのデータをスキャンすることを示します。これが必要な場合は、すべて設定されています。
+
別のボリュームのデータをスキャンする場合は、それらの詳細を手動で入力できます。方法を参照してください link:reference-template-building-blocks.html#pass-values-between-template-actions["[ コンテキスト（ Context ） ] フィールドに入力する"] をクリックして、別のボリュームを指定します。

. [ 適用 ] をクリックして変更を保存します。




=== ボリュームにレプリケーション機能を追加します

ボリュームテンプレートを作成するときに、を使用してボリューム内のデータを別のボリュームにレプリケートするテンプレートにを追加できます https://docs.netapp.com/us-en/cloud-manager-replication/concept-replication.html["レプリケーション"^] サービスデータは、 Cloud Volumes ONTAP クラスタまたはオンプレミスの ONTAP クラスタにレプリケートできます。


TIP: この操作は Azure NetApp Files ボリュームには適用されません。

レプリケーション機能は、ソースボリュームの選択、デスティネーションボリュームの選択、レプリケーション設定の定義の 3 つの部分で構成されます。各セクションについて以下で説明します。

. * ソースの詳細 * ：レプリケートするソースボリュームの詳細を入力します。
+
image:screenshot_template_replication_source.png["レプリケーションソースボリュームの場所を定義するページのスクリーンショット。"]

+
.. デフォルトでは、作業環境、 Storage VM 、およびボリュームについて、最初の 3 つの変数が入力されます。これは、同じテンプレートで以前に作成したボリュームをレプリケートすることを示します。これが必要な場合は、すべて設定されています。
+
別のボリュームをレプリケートする場合は、それらの詳細を手動で入力できます。方法を参照してください link:reference-template-building-blocks.html#pass-values-between-template-actions["[ コンテキスト（ Context ） ] フィールドに入力する"] をクリックして、別のボリュームを指定します。

.. レプリケーションを実行するには、ソースとデスティネーションの作業環境がそれぞれのクラスタ間 LIF を介して接続されている必要があります。ソース作業環境のクラスタ間 LIF の IP アドレスを入力します。
+
この情報を取得するには、作業環境をダブルクリックし、メニューアイコンをクリックして、 [ 情報 ] をクリックします。



. * デスティネーションの詳細 * ：レプリケーション処理によって作成されるデスティネーションボリュームの詳細を入力します。
+
image:screenshot_template_replication_dest.png["レプリケーションのデスティネーションボリュームの場所を定義するページのスクリーンショット。"]

+
.. ボリュームを作成する作業環境を選択します。
.. ボリュームを配置する Storage VM を選択します。
.. ボリュームを（オンプレミスの ONTAP クラスタではなく） Cloud Volumes ONTAP クラスタにレプリケートする場合は、デスティネーションプロバイダ（ AWS 、 Azure 、 GCP ）を指定する必要があります。
.. ボリュームを Cloud Volumes ONTAP クラスタにレプリケートするときに、デスティネーションボリュームでボリューム階層化が有効になっているかどうかを指定することができます。
.. デスティネーションボリューム名について、フィールドをクリックし、 5 つのオプションのいずれかを選択します。任意の名前を入力するには、 * Free Text * を選択します。ボリューム名に特定のプレフィックスまたはサフィックスを付けるか、 _contains_certain 文字を指定するか、または入力した正規表現（ regex ）のルールに従うように指定することもできます。
.. レプリケーションを実行するには、ソースとデスティネーションの作業環境がそれぞれのクラスタ間 LIF を介して接続されている必要があります。デスティネーション作業環境のクラスタ間 LIF の IP アドレスを入力します。
.. ボリュームを配置するアグリゲートを選択します。
.. ボリュームを（オンプレミスの ONTAP クラスタではなく） Cloud Volumes ONTAP クラスタにレプリケートする場合は、新しいボリュームに使用するディスクのタイプを指定する必要があります。


. * レプリケーションの詳細 * ：レプリケーション操作のタイプと頻度に関する詳細を入力します。
+
image:screenshot_template_replication_policy.png["関係のレプリケーション設定を定義するページのスクリーンショット。"]

+
.. を選択します https://docs.netapp.com/us-en/cloud-manager-replication/concept-replication-policies.html#types-of-replication-policies["レプリケーションポリシー"^] を使用します。
.. 1 回限りのコピーまたは繰り返し実行するレプリケーションスケジュールを選択します。
.. 遅延時間、ステータス、および前回の転送時間に加えて、 SnapMirror 関係のレプリケーションの健常性もドリフトレポートに含める場合は、レプリケーションの健常性ステータスの監視を有効にします。 link:task-check-template-compliance.html#replication-health-details-in-the-drift-report["ドリフトレポートでは、このような内容を確認できます"]。
.. 転送速度の上限を設定するかどうかを選択し、データの転送速度の上限（ 1 秒あたりのキロバイト数）を入力します。固定値を入力するか、または最小値と最大値を指定して、ストレージ管理者にその範囲の値を選択させることができます。


. [ 適用 ] をクリックして変更を保存します。




== テンプレートの作成後の作業

テンプレートを作成したら、新しい作業環境およびボリュームを作成する際にテンプレートを使用するようストレージ管理者に通知する必要があります。

それらをに示すことができます link:task-run-templates.html["テンプレートを使用したリソースの作成"] を参照してください。



== テンプレートを編集または削除します

パラメータを変更する必要がある場合は、テンプレートを変更できます。変更を保存すると、テンプレートから作成された以降のすべてのリソースに新しいパラメータ値が使用されます。

不要になったテンプレートを削除することもできます。テンプレートを削除しても、そのテンプレートで作成されたリソースには影響しません。ただし、テンプレートを削除した後にドリフトコンプライアンスチェックを実行することはできません。

image:screenshot_template_edit_remove.png["テンプレートを変更または削除する方法を示すスクリーンショット。"]



== テンプレートのコピーを作成します

既存のテンプレートのコピーを作成できます。これにより、既存のテンプレートと非常によく似た新しいテンプレートを作成する場合に、時間を大幅に節約できます。新しい名前で複製を作成し、テンプレートを編集して、テンプレートを一意にする結合アイテムを変更することができます。

image:screenshot_template_duplicate.png["テンプレートを複製する方法を示すスクリーンショット。"]
